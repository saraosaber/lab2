{"ast":null,"code":"async function safeFetch(url) {\n  return fetch(url).then(response => {\n    if (!response.ok) {\n      throw new Error('${url} returned status ${response.status}');\n    }\n    return response.json();\n  });\n}\nasync function fetchSpecificIngredient(category, item) {\n  return safeFetch(\"http://localhost:8080/\" + category + \"/\" + item);\n}\nasync function fetchCategory(category, keys) {\n  return Object.assign({}, ...(await Promise.all(keys.map(async x => {\n    return {\n      [x]: await fetchSpecificIngredient(category, x)\n    };\n  }))));\n}\nexport default async function fetchAllIngredients() {\n  const [foundations, proteins, extras, dressings] = await Promise.all([fetchCategory(\"foundations\", await safeFetch(\"http://localhost:8080/foundations/\")), fetchCategory(\"proteins\", await safeFetch(\"http://localhost:8080/proteins/\")), fetchCategory(\"extras\", await safeFetch(\"http://localhost:8080/extras/\")), fetchCategory(\"dressings\", await safeFetch(\"http://localhost:8080/dressings/\"))]);\n  console.log(foundations);\n  let finalFoundations = Object.assign({}, ...(await Promise.all(foundations.map(async x => {\n    return {\n      [x]: await fetchSpecificIngredient(\"foundations\", x)\n    };\n  }))));\n  return {\n    finalFoundations,\n    proteins,\n    extras,\n    dressings\n  };\n}","map":{"version":3,"names":["safeFetch","url","fetch","then","response","ok","Error","json","fetchSpecificIngredient","category","item","fetchCategory","keys","Object","assign","Promise","all","map","x","fetchAllIngredients","foundations","proteins","extras","dressings","console","log","finalFoundations"],"sources":["/Users/ludwigcederberg/Documents/University/Courses/Webbprogrammering/lab4/lab4_client/src/fetchInventory.js"],"sourcesContent":["\nasync function safeFetch(url){\n  return fetch(url)\n  .then(response => {\n    if(!response.ok) {\n      throw new Error('${url} returned status ${response.status}');\n    }\n    return response.json();\n  });\n}\n\n\n\nasync function fetchSpecificIngredient(category, item){\n  return safeFetch(\"http://localhost:8080/\" + category + \"/\" + item);\n}\n\nasync function fetchCategory(category, keys) {\n  return Object.assign({}, ...await Promise.all(keys.map(async (x) => { \n    return {[x]: await fetchSpecificIngredient(category, x)}\n  })))\n}\n\nexport default async function fetchAllIngredients() {\n  const [foundations, proteins, extras, dressings] = await Promise.all([\n    fetchCategory(\"foundations\", await safeFetch(\"http://localhost:8080/foundations/\")),\n    fetchCategory(\"proteins\", await safeFetch(\"http://localhost:8080/proteins/\")),\n    fetchCategory(\"extras\", await safeFetch(\"http://localhost:8080/extras/\")),\n    fetchCategory(\"dressings\", await safeFetch(\"http://localhost:8080/dressings/\"))\n  ]);\n\n  console.log(foundations)\n\n  let finalFoundations = Object.assign({}, ...await Promise.all(foundations.map(async (x) => { \n    return {[x]: await fetchSpecificIngredient(\"foundations\", x)}\n  })))\n\n\n\n\n\n  \n\n  return {\n    finalFoundations, \n    proteins, \n    extras, \n    dressings,\n  };\n}"],"mappings":"AACA,eAAeA,SAASA,CAACC,GAAG,EAAC;EAC3B,OAAOC,KAAK,CAACD,GAAG,CAAC,CAChBE,IAAI,CAACC,QAAQ,IAAI;IAChB,IAAG,CAACA,QAAQ,CAACC,EAAE,EAAE;MACf,MAAM,IAAIC,KAAK,CAAC,2CAA2C,CAAC;IAC9D;IACA,OAAOF,QAAQ,CAACG,IAAI,CAAC,CAAC;EACxB,CAAC,CAAC;AACJ;AAIA,eAAeC,uBAAuBA,CAACC,QAAQ,EAAEC,IAAI,EAAC;EACpD,OAAOV,SAAS,CAAC,wBAAwB,GAAGS,QAAQ,GAAG,GAAG,GAAGC,IAAI,CAAC;AACpE;AAEA,eAAeC,aAAaA,CAACF,QAAQ,EAAEG,IAAI,EAAE;EAC3C,OAAOC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE,IAAG,MAAMC,OAAO,CAACC,GAAG,CAACJ,IAAI,CAACK,GAAG,CAAC,MAAOC,CAAC,IAAK;IAClE,OAAO;MAAC,CAACA,CAAC,GAAG,MAAMV,uBAAuB,CAACC,QAAQ,EAAES,CAAC;IAAC,CAAC;EAC1D,CAAC,CAAC,CAAC,EAAC;AACN;AAEA,eAAe,eAAeC,mBAAmBA,CAAA,EAAG;EAClD,MAAM,CAACC,WAAW,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,CAAC,GAAG,MAAMR,OAAO,CAACC,GAAG,CAAC,CACnEL,aAAa,CAAC,aAAa,EAAE,MAAMX,SAAS,CAAC,oCAAoC,CAAC,CAAC,EACnFW,aAAa,CAAC,UAAU,EAAE,MAAMX,SAAS,CAAC,iCAAiC,CAAC,CAAC,EAC7EW,aAAa,CAAC,QAAQ,EAAE,MAAMX,SAAS,CAAC,+BAA+B,CAAC,CAAC,EACzEW,aAAa,CAAC,WAAW,EAAE,MAAMX,SAAS,CAAC,kCAAkC,CAAC,CAAC,CAChF,CAAC;EAEFwB,OAAO,CAACC,GAAG,CAACL,WAAW,CAAC;EAExB,IAAIM,gBAAgB,GAAGb,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE,IAAG,MAAMC,OAAO,CAACC,GAAG,CAACI,WAAW,CAACH,GAAG,CAAC,MAAOC,CAAC,IAAK;IACzF,OAAO;MAAC,CAACA,CAAC,GAAG,MAAMV,uBAAuB,CAAC,aAAa,EAAEU,CAAC;IAAC,CAAC;EAC/D,CAAC,CAAC,CAAC,EAAC;EAQJ,OAAO;IACLQ,gBAAgB;IAChBL,QAAQ;IACRC,MAAM;IACNC;EACF,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}